我们利用类似于坐标平面的方式来记录每个square unit，也就是每个square unit都可以被表示成【G3】的形式。后面的所有【G3】都是代表一个square unit。

%参数表
a   300米（square unit的边长）
【G6】   【G3】的区域类别
【G8】   【G3】的发展等级

%公式1
首先我们对一个城市的分区多样化程度进行定量分析。由于Pr.4中鼓励create walkable neighborhoods，所以我们主要考量居民可以从residential area通过步行到达working area和recreation area。
对于某一个square unit，我们考虑与之横纵坐标之差均不大于2的所有square unit；这样的话，居民只需要步行至多【G1】就可以到达自己所想要去的功能分区。所以对于，定义其mix-metric为【G2】，其中【G4】指的是【G5】相对于【G3】而言为分区多样化提供的贡献。
容易看到，【G5】的发展程度越高，与【G3】的距离越近，多样化程度就越高。同时，两个区域类别对于分区多样化的贡献程度应该是不同的；这是因为对于一般的民众来说，working area靠近会更为重要一些。所以我们在metric中认为【G7】，这里【G9】表示不同的区域类别对于居民的重要程度。在我们的metric中，权值的取值可以见下表：

【G10】  residential area      working area      recreation area        open space
【G9】       0                 0.6              0.4                  0
最终城市的分区多样性指数便取决于所有residential area的mix-metric的加权平均值：【G11】。对每个residential area加权的原因是residential area的发展程度越高，分区多样性越显著，但不如working area那样明显。
接下来我们需要将分区多样性指数换算成一个百分制的得分。
我们引入一个调分函数【G12】：【G13】。【G12】满足当x趋向于正无穷时，函数的值趋向于100。
我们通过如下的准则来确认参数r，k的值：由于根据assumption，大多数建筑的发展程度都不超过3，所以我们认为当所有建筑的发展程度都是1时，分区多样性指数的期望值的得分为60分；而所有建筑的发展程度都是2时，分区多样性指数的期望值的得分为85分。
当所有建筑的发展程度都是1时，分区多样性指数的期望值为【G14】；当所有建筑的发展程度都是1时，分区多样性指数的期望值为【G15】。
由此解得【G16】。
于是城市的分布多样性得分为【G17】。

%公式2
其次我们对一个城市的景观规划进行定量分析。注意到自然景观起到的主要作用事实上是改善了周边的城市分区的生活质量，所以对于每一个非open space的square unit，它所能受到自然景观的影响是【G18】（与之前确定【G7】时一样，自然景观的影响与自然景观的发展程度正相关，而与距离反相关）。
所以一个城市的自然景观指数也就是所有b(i,j)的平均值，即【G19】。
同样引入调分函数【G12】。与公式1完全类似，我们定义当所有open space的发展程度都是1时，景观指数的期望值的得分为60分；而所有open space的发展程度都是2时，景观指数的期望值的得分为85分。
当所有open space的发展程度都是1时，景观指数的期望值为【G20】；所有open space的发展程度都是2时，景观指数的期望值为【G21】。
由此解得【G22】。
于是城市的景观得分为【G23】。
